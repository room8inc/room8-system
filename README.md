# Room8 - コワーキングスペース管理システム

Room8は、コワーキングスペース運営のための包括的なWebアプリケーションです。会員管理、スペース利用管理、会議室予約、決済処理などの機能を統合し、データドリブン経営を実現することを目指しています。

## 📋 プロジェクト概要

### 最終ゴール
**データドリブン経営の実現**
- 会員動向を全てデータ化して分析できる状態にする
- 各種データを可視化・分析して意思決定に活用

### 主な機能

#### 1. 会員管理
- **定期会員（定額会員）**：約9プラン（平日のみ、夜のみ、土日のみ、シェアオフィス、コワーキングスペースなど）
- **ドロップイン会員**：1時間利用可能な会員
- 会員登録・退会処理
- プラン変更処理
- オプション管理（ロッカーなど）

#### 2. チェックイン/チェックアウトシステム
- 定期会員向けの入退室管理
- ドロップイン会員向けの利用時間計測と課金
- 時間外利用の自動検知と追加課金

#### 3. 会議室管理
- 会議室予約システム
- 複数人利用時の請求分け機能
- プラン別の料金体系
  - 定額会員（一般）：1,100円/時間
  - シェアオフィスプラン：月4時間まで無料
  - 定額会員以外：2,200円/時間

#### 4. ゲスト利用管理
- ゲスト本人による支払い or 代表者による支払い（選択可能）
- プラン別のゲスト利用ルール
- 複数人での利用管理

#### 5. 決済・課金システム
- **クレジットカード決済**（メイン）
  - 定期会費の自動引き落とし（毎月1日）
  - ドロップイン利用料金
  - 会議室利用料金
- **銀行振込**（手動管理）
  - 振込確認後の手動処理
- 未決済時の警告表示（ログイン時）

#### 6. データ分析・可視化
- 管理者向けダッシュボード
- 各種レポート機能
- データエクスポート機能（CSV/Excel）
- AI分析連携（生成AIでの分析対応）

## 📊 料金体系

### ドロップイン料金
- 1時間：400円
- 最大料金：2,000円（税込み）

### 会議室料金
- 定額会員（一般）：1,100円/時間
- 定額会員（シェアオフィスプラン）：月4時間まで無料、超過分1,100円/時間
- 定額会員以外：2,200円/時間

### 定期会員プラン
- 約9プラン存在
- 各プランで利用可能時間が異なる
- 時間外利用は追加課金

## 📁 プロジェクト構成

```
Room8/
├── README.md                 # 本ファイル（プロジェクト概要・進捗状況）
├── requirements.md           # 要件定義書
├── system-specs.md           # システム仕様書
├── development-plan.md       # 開発計画書（開発手順・フェーズ）
├── pricing.md                # 料金プラン・プラン体系（統合）
├── infrastructure.md         # サーバー構成・コスト・成長戦略（統合）
├── auth.md                   # 認証・ログイン・チェックイン（統合）
├── line-integration.md       # LINE連携（統合）
├── database-design.md        # データベース設計書
├── _guides/                  # 一時的なガイドファイル（Git管理外）
└── supabase/
    └── migrations/           # データベースマイグレーションファイル
```

### 📝 ドキュメント管理ルール

#### Git管理下（ルート）
**永続的なドキュメント**をGit管理下に配置します：
- 仕様書（requirements.md, system-specs.md, etc.）
- 設計書（database-design.md, etc.）
- 計画書（development-plan.md, etc.）
- プロジェクト概要（README.md）

#### Git管理外（`_guides/`）
**一時的なガイドファイル**は`_guides/`ディレクトリに保存し、Git管理外にします：
- 設定手順ガイド（環境構築手順など）
- トラブルシューティングガイド
- 一時的なメモや作業ログ

**理由**：
- 一度設定が完了すれば不要になるファイルはGit履歴に残さない
- リポジトリをクリーンに保つ
- 必要な場合は`_guides/`ディレクトリをローカルで参照可能

**注意**：
- `_guides/`ディレクトリは`.gitignore`で除外されているため、Gitにコミットされません
- ローカルでのみ保存され、必要に応じて削除可能です

## 🔄 プロジェクトステータス

### 現在のフェーズ
- ✅ 要件定義（完了）
- ✅ プラン体系・料金構造の設計（完了）
  - ✅ 9プランの詳細情報整理（完了）
  - ✅ 時間外利用の追加課金詳細（完了）
  - ✅ 会議室決済タイミング（完了）
  - ✅ 会議室・設備情報（完了）
  - ✅ チェックイン/チェックアウト方法（完了）
  - ✅ 会員登録時の情報整理（完了）
  - ✅ システム要件整理（完了）
- ⏳ 技術スタック選定（次フェーズ）
- ⏳ データベース設計（次フェーズ）
- ⏳ API設計（次フェーズ）
- ⏳ UI/UX設計（次フェーズ）
- ⏳ 実装（未着手）

## 📝 ドキュメント

### 主要ドキュメント
- **[要件定義書](./requirements.md)**
  - 全体の要件定義
  - 主要機能の詳細
  - 会員管理、チェックイン/チェックアウト、会議室管理、ゲスト利用、決済・課金

- **[料金プラン・プラン体系](./pricing.md)**
  - 定期会員プラン詳細（9プラン）
  - 料金体系（ドロップイン、会議室、時間外利用）
  - 決済・課金タイミング
  - 割引システム、オプション

- **[システム仕様書](./system-specs.md)**
  - 会議室・設備管理（会議室1室、ロッカー手動管理）
  - チェックイン/チェックアウト（QRコード方式）
  - 会員登録時の情報（個人・法人・ドロップイン）
  - 時間外利用の詳細仕様（10分猶予、15分超過から課金）
  - システム要件（低コスト、MCPサーバー活用）

- **[開発計画書](./development-plan.md)**
  - 開発フェーズ（Phase 0〜6）
  - 技術スタック選定
  - 開発効率化のポイント
  - 優先順位付け
  - スケジュール

- **[インフラ構成](./infrastructure.md)**
  - サーバー構成案（Vercel + Supabase推奨）
  - コスト見積もり（1日30人想定、無料枠で運用可能）
  - 成長戦略（段階的な運用方針：無料プランで開始 → 成長時に有料プランへ）

- **[認証・ログイン・チェックイン](./auth.md)**
  - ログイン方法（メール+パスワード、セッション30日間保持）
  - チェックインフロー（事前ログイン + 会場ではQRのみ）
  - QRコード設計（会場QR、個人用QR、会議室QR）
  - セッション管理・個人識別の仕組み

- **[LINE連携](./line-integration.md)**
  - LINE連携の選択肢
  - LINE公式アカウントの料金詳細（無料プランでOK）
  - 個別メッセージの料金（月200通まで無料）
  - 決定事項（Phase 2で追加、オプション）

- **[セットアップガイド](./setup-guide.md)**
  - 必要なアカウント作成手順（Vercel、Supabase、Stripe）
  - 全て無料でアカウント作成可能
  - 環境変数の設定方法

## 🎯 主要ユーザー

### 一般会員
- 定期会員・ドロップイン会員
- チェックイン/チェックアウト
- 会議室予約
- 決済履歴確認
- プラン変更申請

### 管理者
- 全データの閲覧・管理
- 会員管理
- 手動決済処理（銀行振込の確認など）
- データエクスポート
- AI分析の実行

## 🔐 認証・セキュリティ

### ログイン方法
- **メール+パスワードログイン + ログイン状態保持**（メイン）
  - ログイン時に「ログイン状態を保持」チェックボックス
  - セッションを30日間保持
  - 次回以降：アプリを開けば自動ログイン
  - **会場では会場のQRコードを一度読むだけ**（ログイン済み状態）
- **LINE連携**（Phase 2で追加、オプション）

### セキュリティ
- 権限管理（一般会員、管理者）
- 個人情報保護
- セッション管理（HttpOnly Cookie）
- サーバー側でユーザーIDを管理

詳細は以下を参照してください：
- **[認証・ログイン・チェックイン](./auth.md)** - ログイン方法、チェックインフロー、QRコード設計、セッション管理
- **[インフラ構成](./infrastructure.md)** - サーバー構成案、コスト見積もり、成長戦略
- **[LINE連携](./line-integration.md)** - LINE連携の選択肢、料金詳細、個別メッセージの料金

## 📧 通知機能

- 予約確認メール
- チェックイン/チェックアウト通知
- プラン変更通知
- 決済関連通知
  - 決済日のリマインダー
  - 決済失敗時の通知
  - 未決済時の警告

## 🔄 次ステップ

### 準備完了（✅）
- ✅ 要件定義の完了
- ✅ プラン体系の整理完了
- ✅ 料金体系の確定
- ✅ システム仕様の確定

### 次のフェーズ（⏳）

詳細は [開発計画書](./development-plan.md) を参照してください。

**Phase 0: 準備フェーズ**
- 技術スタック選定
- 開発環境構築

**Phase 1: MVPフェーズ**（最優先）
- データベース設計
- 認証・会員登録
- チェックイン/チェックアウト基本機能
- 基本的な管理画面

**Phase 2: 決済機能フェーズ**
- クレジットカード決済統合
- ドロップイン決済
- 時間外利用・追加課金
- 銀行振込の手動管理

**Phase 3〜6: その他機能**
- 会議室管理
- プラン管理・変更
- データ分析・ダッシュボード
- ゲスト利用・代表者支払い

## 📌 重要な仕様詳細

### 時間外利用の仕様（確定済み）
- **猶予時間**: 10分まで無料
- **課金開始**: 15分超過から
- **料金**: 30分200円、1時間400円、最大2,000円（ドロップインと同じ）
- **課金タイミング**: 定額会員は会議室利用と合算して月末（翌月1日）にまとめて請求

### 会議室決済タイミング（確定済み）
- **ドロップイン会員**: 予約時に決済
- **定額会員**: 時間外利用と合算して月末（翌月1日）にまとめて請求

### チェックイン/チェックアウト（確定済み）
- **方法**: QRコード読み取り方式
- **実装**: アプリでQRコードを読み取り
- **ログイン方針**: 事前ログイン + 会場ではQRのみ（セッション時間を長めに設定、パスワード保存機能も活用）

### 会議室・設備（確定済み）
- **会議室**: 1室のみ
- **ロッカー**: 管理画面から手動で調整可能

### システム要件（確定済み）
- **目標**: なるべく低コストで実現
- **開発コスト削減**: MCPサーバー等を活用

## 📄 ライセンス

[ライセンス情報は後で追加予定]

## 👥 開発チーム

[開発チーム情報は後で追加予定]

---

**最終更新日**: 2025年11月1日

