# Room8 開発計画書

## 🎯 開発の基本方針

### 目標
- **低コストで実現**
- **MCPサーバー等を活用して開発コスト削減**
- **段階的な機能リリース（MVP → 本格運用）**
- **データドリブン経営の基盤を早期に構築**

---

## 📋 開発フェーズ

### Phase 0: 準備フェーズ（1-2週間）

#### 0-1. 技術スタック選定
**目標**: 低コストで開発・運用できる技術スタックを決定

**検討項目**:
- **フロントエンド**
  - Next.js（React）: SSR/SSG対応、Vercelホスティング無料枠
  - TypeScript: 型安全性でバグ削減
  
- **バックエンド**
  - Next.js API Routes: フルスタックで開発効率化
  - または Node.js + Express: より柔軟な構成
  
- **データベース**
  - PostgreSQL（Supabase/Neon無料枠）: フル機能のRDB
  - または SQLite（開発初期）: 簡単に始められる
  
- **認証**
  - NextAuth.js: Next.jsとの統合が容易
  - または Supabase Auth: 無料枠あり
  
- **決済**
  - Stripe: 日本対応、開発者フレンドリー
  - または PayPal: 比較的低コスト
  
- **ホスティング**
  - Vercel: Next.js最適化、無料枠あり
  - または Railway: データベース込みで無料枠あり

**決定事項**: 
- [ ] フロントエンド選定
- [ ] バックエンド選定
- [ ] データベース選定
- [ ] 認証選定
- [ ] 決済選定
- [ ] ホスティング選定

#### 0-2. 開発環境構築
**目標**: 開発を開始できる環境を整備

**作業内容**:
- [ ] プロジェクト初期化
- [ ] 開発環境セットアップ（ローカル）
- [ ] Gitリポジトリ作成・設定
- [ ] CI/CDパイプライン構築（基本的なもの）
- [ ] 環境変数管理設定
- [ ] 開発ツール選定・導入

---

### Phase 1: MVP（最小限の機能）フェーズ（4-6週間）

**目標**: 基本的な会員管理とチェックイン/チェックアウト機能を実装

#### 1-1. データベース設計（1週間）
**目標**: システムの基盤となるデータベース構造を設計・実装

**作業内容**:
- [ ] ER図作成
- [ ] テーブル設計
  - [ ] ユーザーテーブル（会員情報）
  - [ ] プランテーブル（9プラン）
  - [ ] 会員プラン履歴テーブル
  - [ ] チェックイン/チェックアウトログテーブル
  - [ ] ロッカーテーブル
- [ ] マイグレーション作成
- [ ] 初期データ投入（プラン情報など）

#### 1-2. 認証・会員登録（1週間）
**目標**: 会員登録とログイン機能を実装

**作業内容**:
- [ ] 会員登録フォーム実装
  - [ ] 個人会員登録
  - [ ] 法人会員登録
  - [ ] ドロップイン会員登録
- [ ] 身分証明書・登記簿謄本のアップロード機能
- [ ] 認証システム実装（ログイン/ログアウト）
- [ ] メール認証（必要に応じて）

#### 1-3. チェックイン/チェックアウト基本機能（1-2週間）
**目標**: QRコードによるチェックイン/チェックアウト機能

**作業内容**:
- [ ] QRコード生成機能
- [ ] QRコード読み取り機能（カメラAPI）
- [ ] チェックインAPI実装
  - [ ] プラン利用可能時間チェック
  - [ ] 時間外利用検知
  - [ ] ログ記録
- [ ] チェックアウトAPI実装
  - [ ] 滞在時間計算
  - [ ] ドロップイン会員の料金計算
  - [ ] ログ記録
- [ ] チェックイン/チェックアウト画面実装

#### 1-4. 基本的な管理画面（1週間）
**目標**: 管理者が最低限必要な情報を確認できる画面

**作業内容**:
- [ ] 管理者ダッシュボード（基本統計）
  - [ ] 現在の在室者数
  - [ ] 今日のチェックイン数
  - [ ] 会員数
- [ ] 会員一覧・検索機能
- [ ] チェックイン/チェックアウトログ閲覧

**MVP完了基準**:
- ✅ 会員登録・ログインができる
- ✅ QRコードでチェックイン/チェックアウトができる
- ✅ 管理者が基本的な情報を確認できる

---

### Phase 2: 決済機能フェーズ（3-4週間）

**目標**: 決済システムを実装し、実際に料金を徴収できるようにする

#### 2-1. クレジットカード決済統合（1週間）
**作業内容**:
- [ ] 決済サービス（Stripe等）の統合
- [ ] クレジットカード情報の登録機能
- [ ] 定期会費の自動引き落とし設定
- [ ] 決済API実装

#### 2-2. ドロップイン決済（1週間）
**作業内容**:
- [ ] チェックアウト時の決済処理
- [ ] 料金計算ロジック（1時間400円、最大2,000円）
- [ ] 決済完了通知
- [ ] 決済履歴表示

#### 2-3. 時間外利用・追加課金（1-2週間）
**作業内容**:
- [ ] 時間外利用検知ロジック（10分猶予、15分超過から課金）
- [ ] 時間外利用料金計算（30分200円）
- [ ] 定額会員の追加課金集計（月末まとめて）
- [ ] 月末決済処理（翌月1日）

#### 2-4. 銀行振込の手動管理（1週間）
**作業内容**:
- [ ] 銀行振込決済の手動入力画面
- [ ] 振込確認・承認機能
- [ ] 未入金の追跡機能

**Phase 2完了基準**:
- ✅ 定期会費の自動引き落としができる
- ✅ ドロップイン利用料金を決済できる
- ✅ 時間外利用の追加課金ができる
- ✅ 銀行振込を手動で管理できる

---

### Phase 3: 会議室管理フェーズ（2-3週間）

**目標**: 会議室予約・利用管理機能を実装

#### 3-1. 会議室予約機能（1-2週間）
**作業内容**:
- [ ] 会議室予約フォーム
- [ ] 空き状況確認機能
- [ ] 予約作成・変更・キャンセル機能
- [ ] 予約確認メール送信
- [ ] プラン別料金計算（シェアオフィスプラン月4時間無料など）

#### 3-2. 会議室決済（1週間）
**作業内容**:
- [ ] ドロップイン会員：予約時決済
- [ ] 定額会員：月末まとめて決済
- [ ] 請求分け機能（複数人利用時）
- [ ] 会議室利用ログ記録

---

### Phase 4: プラン管理・変更フェーズ（2週間）

**目標**: プラン変更やオプション管理機能を実装

#### 4-1. プラン変更機能（1週間）
**作業内容**:
- [ ] プラン変更申請画面
- [ ] プラン変更履歴管理
- [ ] 料金変更処理
- [ ] プラン変更通知

#### 4-2. オプション管理（1週間）
**作業内容**:
- [ ] ロッカー管理機能（管理者が手動調整）
- [ ] オプション料金計算
- [ ] オプション追加・削除機能

---

### Phase 5: データ分析・ダッシュボードフェーズ（2-3週間）

**目標**: データドリブン経営のための分析機能を実装

#### 5-1. データ収集の強化（1週間）
**作業内容**:
- [ ] 全てのアクションのログ記録
- [ ] データの整合性確認
- [ ] データ収集の最適化

#### 5-2. ダッシュボード実装（1-2週間）
**作業内容**:
- [ ] リアルタイム統計表示
- [ ] 日次・週次・月次レポート
- [ ] 会員動向分析
- [ ] 利用パターン分析
- [ ] 収益レポート

#### 5-3. データエクスポート機能（1週間）
**作業内容**:
- [ ] CSV/Excel形式でのエクスポート
- [ ] データ整形機能
- [ ] 生成AIでの分析用データ整形

---

### Phase 6: ゲスト利用・代表者支払いフェーズ（2週間）

**目標**: ゲスト利用と代表者支払い機能を実装

#### 6-1. ゲスト利用管理（1週間）
**作業内容**:
- [ ] ゲスト利用時の支払い方法選択
- [ ] ゲスト本人の会員登録フロー
- [ ] 代表者支払いフロー
- [ ] シェアオフィスプランのゲスト利用ルール（1名2時間無料）
- [ ] コワーキングスペースプランのゲスト利用ルール

#### 6-2. 複数人利用管理（1週間）
**作業内容**:
- [ ] 利用人数の記録
- [ ] 代表者の指定
- [ ] 請求分け機能
- [ ] 各利用者の利用時間記録

---

## 🔧 開発効率化のポイント

### MCPサーバーの活用
- **コード生成**: MCPサーバーでコード生成を自動化
- **テスト生成**: テストケースの自動生成
- **ドキュメント生成**: APIドキュメントの自動生成

### 段階的な実装
- **MVP優先**: 最小限の機能で早期リリース
- **フィードバック重視**: 各フェーズでユーザーフィードバックを収集
- **機能追加**: 必要に応じて機能を追加

### コスト削減のポイント
- **無料枠の活用**: Vercel、Supabase等の無料枠を最大限活用
- **サーバーレス**: サーバーレスアーキテクチャで運用コスト削減
- **効率的な実装**: 既存ライブラリ・サービスの活用

---

## 📅 開発スケジュール（目安）

### 短期スケジュール（3ヶ月）
- **Phase 0**: 1-2週間
- **Phase 1 (MVP)**: 4-6週間
- **Phase 2 (決済)**: 3-4週間
- **合計**: 約3ヶ月で基本機能完成

### 中期スケジュール（6ヶ月）
- **Phase 3 (会議室)**: 2-3週間
- **Phase 4 (プラン管理)**: 2週間
- **Phase 5 (データ分析)**: 2-3週間
- **Phase 6 (ゲスト利用)**: 2週間
- **合計**: 約6ヶ月で全機能完成

---

## 🎯 優先順位

### 最優先（MVP）
1. 会員登録・認証
2. チェックイン/チェックアウト
3. 基本的な管理画面

### 高優先度
4. 決済機能（定期会費・ドロップイン）
5. 時間外利用の課金
6. 会議室予約・決済

### 中優先度
7. プラン変更機能
8. オプション管理
9. ゲスト利用・代表者支払い

### 低優先度（後で追加可能）
10. データ分析・ダッシュボード（詳細版）
11. AI分析連携
12. 高度なレポート機能

---

## 📝 次のアクション

### すぐに始めること
1. ✅ 技術スタック選定
2. ✅ 開発環境構築
3. ✅ データベース設計開始

### 並行して進めること
- ドキュメント整備（API設計など）
- プロトタイプ作成（主要画面のワイヤーフレーム）

