# Room8 Webアプリケーション - 要件定義

## 最終ゴール
**データドリブン経営の実現**
- 会員動向を全てデータ化して分析できる状態にする
- 各種データを可視化・分析して意思決定に活用

## 主要機能一覧

### 1. 会員管理

#### 会員種別
- **定期会員（定額会員）**
  - 複数のプランから選択（約9プラン）
  - 例：平日のみ、夜のみ、土日のみなど
  - 各プランで利用可能時間が異なる
  - 時間外利用は追加課金

- **ドロップイン会員**
  - ドロップイン利用のための会員登録が必要
  - ゲストとして利用する場合も登録可能

#### 会員登録
- 新規会員登録処理
- 個人情報の登録・管理
- プラン選択（入会時）
- オプション選択（ロッカーなど）

#### 会員退会
- 退会申請処理
- 退会理由の記録
- データの保持期間・削除ポリシー

#### プラン変更
- プラン変更申請
- プラン変更履歴の記録
- 料金変更の処理
- 変更タイミングの管理（即時 or 月末など）

### 2. チェックイン/チェックアウトシステム

#### 定期会員向け
- **チェックイン**
  - 入室時刻の記録
  - 利用開始の記録
  - 滞在時間の計測開始

- **チェックアウト**
  - 退室時刻の記録
  - 滞在時間の計算・記録
  - 利用終了の記録

#### ドロップイン向け
- **チェックイン**
  - 入室時刻の記録
  - ドロップイン料金の計算開始
  - 料金：1時間400円、最大料金2000円（税込み）

- **チェックアウト**
  - 退室時刻の記録
  - 滞在時間に基づく料金計算
  - 決済処理（クレジットカード）
  - 利用終了の記録

#### 定期会員の時間外利用
- **チェックイン/チェックアウト**
  - プラン外の時間帯での利用を検知
  - 時間外利用時間の記録
  - **猶予時間**: 10分まで無料（サービス提供）
    - 例：デイタイムプラン（17時まで）の場合、17:10までは無料
  - **課金開始**: 15分超過から課金
  - **追加課金の計算**: ドロップインと同じ料金体系（30分200円、1時間400円、最大2,000円）
  - **課金タイミング**: 会議室利用と合算して月末（翌月1日）にまとめて請求

### 3. 会議室管理

#### 会議室料金体系
- **定額会員（一般）**
  - 1時間：1,100円
- **定額会員（シェアオフィスプラン）**
  - 月4時間まで無料
  - 4時間超過分：1,100円/時間
- **定額会員以外**
  - 1時間：2,200円

#### 会議室予約
- 会議室の空き状況確認
- 予約作成（日時・時間・人数など）
- 予約確認
- 予約変更
- 予約キャンセル
- **複数人での利用時の請求分け機能**
  - 利用者ごとの請求を分けて管理
  - 代表者による支払い or 個別支払い

#### 会議室利用管理
- 実際の利用開始時刻の記録
- 実際の利用終了時刻の記録
- 利用状況の追跡
- 予約との差分分析
- 利用者リストの記録（請求分けのため）

#### 会議室決済
- 予約時の決済処理（または予約時は保留、利用後に決済）
- 追加料金（延長など）の処理
- キャンセル時の返金処理
- 請求の分割処理（複数人利用時）

### 4. ゲスト利用管理

#### ゲスト利用の支払い方法
- **オプション1：ゲスト本人が会員登録して支払い**
  - ゲストにドロップイン会員登録を促す
  - ゲスト本人が支払い
  
- **オプション2：利用者が代表として支払い**
  - 会員が代表者として複数人分を支払い
  - ドロップイン利用の場合の支払い方法選択

#### プラン別のゲスト利用ルール
- **シェアオフィスプラン**
  - 1名あたり2時間まで無料
  - 2時間超過分は代表者から請求
  
- **コワーキングスペースプラン**
  - ゲスト利用は有料
  - ゲスト本人がドロップイン会員登録して支払い
  - または会員が代表として支払い（選択可能）

#### 複数人での利用管理
- 利用人数の記録
- 代表者の指定
- 支払い方法の選択
- 各利用者の利用時間の記録

### 5. データ分析・可視化

#### 収集すべきデータ
- 会員データ
  - 登録日・退会日
  - プラン履歴
  - 利用頻度
  - 滞在時間
  - チェックイン/チェックアウトパターン

- 会議室データ
  - 予約数
  - 利用率
  - 予約時間帯別の利用状況
  - キャンセル率
  - 収益

- ドロップインデータ
  - 利用回数
  - 滞在時間
  - 収益
  - 利用者属性

#### 分析・可視化
- **ダッシュボード（管理者向け）**
  - リアルタイムの利用状況
  - 日次・週次・月次の統計
  - 収益レポート
  - 会員動向レポート

- **レポート機能**
  - 会員増減トレンド
  - 利用パターン分析
  - 収益分析
  - 会議室利用率分析
  - プラン別の利用状況
  - 時間外利用の分析

- **データエクスポート機能**
  - 各種データをCSV/Excel形式でエクスポート
  - 生成AIでの分析用にデータを整形
  - 管理画面からのエクスポート or API連携

- **AI分析連携**
  - データをエクスポートして生成AIで分析
  - または管理画面から直接AI分析APIに連携

## 検討が必要な項目

### 決済・課金

#### 決済手段
- **クレジットカード決済**（メイン）
  - 定期会費の自動引き落とし
  - ドロップイン利用料金
  - 会議室利用料金
  - 時間外利用追加料金
  - オプション（ロッカーなど）料金

- **銀行振込**（補助）
  - 手動チェックで管理（数が少ないため）
  - 振込確認後の手動処理
  - 未入金の追跡

#### 課金タイミング
- **定期会費**
  - 毎月1日が決済日（例：11月分は11月1日）
  - 決済失敗時の警告表示（ログイン時）
  - 未決済でも利用可能（ただし警告を表示）
  
- **ドロップイン利用料金**
  - チェックアウト時に即座に決済

- **会議室利用料金**
  - **ドロップイン会員**: 予約時に決済
  - **定額会員**: 時間外利用と合算して月末（翌月1日）にまとめて請求

- **時間外利用追加料金**
  - 定額会員：会議室利用と合算して月末（翌月1日）にまとめて請求

#### 料金体系（詳細）
- **定期会員プラン**
  - 約9プラン（平日のみ、夜のみ、土日のみなど）
  - 各プランで利用可能時間が異なる
  - 時間外利用は追加課金

- **ドロップイン料金**
  - 1時間：400円
  - 最大料金：2,000円（税込み）

- **会議室料金**
  - 定額会員（一般）：1,100円/時間
  - 定額会員（シェアオフィスプラン）：月4時間まで無料、超過分1,100円/時間
  - 定額会員以外：2,200円/時間

- **オプション料金**
  - ロッカーなどのオプション料金（プランにより異なる）

### 認証・セキュリティ

#### ログイン方法（優先順位順）
1. **QRコードログイン**（メイン・推奨）
   - 個人用QRコードを読み取るだけでログイン（パスワード不要）
   - チェックイン/チェックアウトと同じQRコード方式で統一感
2. **メールアドレス + パスワード**（フォールバック）
   - 従来のログイン方法
   - QRコードが使えない場合の代替手段
3. **メールリンクログイン**（パスワード忘れ時・拡張機能）
   - パスワード不要でメールリンクをクリックするだけ
4. **長期ログイン状態の維持**（拡張機能）
   - 「ログイン状態を保持」チェックボックスで30日間維持

#### 権限管理
- **一般会員**
    - 自分の予約管理
    - チェックイン/チェックアウト
    - ドロップイン利用
    - 会議室予約
    - プラン変更申請
    - 決済履歴確認
  - **管理者**
    - 全データの閲覧・管理
    - 会員管理
    - 手動決済処理（銀行振込の確認など）
    - データエクスポート
    - AI分析の実行
- 個人情報保護

### 通知機能
- 予約確認メール
- チェックイン/チェックアウト通知
- プラン変更通知
- 退会確認
- **決済関連通知**
  - 決済日のリマインダー（決済日前）
  - 決済失敗時の通知
  - 未決済時の警告（ログイン時）

### その他
- 多言語対応の必要性
- モバイルアプリの必要性
- 外部システム連携（会計システムなど）
- オプション管理（ロッカーなど）の詳細仕様

## 次ステップ
1. 各機能の詳細要件の整理
2. 技術スタックの選定
3. データベース設計
4. API設計
5. UI/UX設計

